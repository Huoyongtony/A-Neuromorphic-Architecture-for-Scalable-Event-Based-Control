<?xml version="1.0" ?>
<mujoco model="snake">
  <compiler angle="radian"/>
  <!-- Enable self-collision globally here -->
  <option timestep="0.01"/>
  <default>
    <!-- Increased damping and added solref/solimp for improved joint stability -->
    <joint armature="0.1" damping="1.0"/>
    <geom contype="1" conaffinity="1" friction="1 0.1 0.1" density="1000"/>
  </default>

<visual>
  <global offwidth="1500" offheight="1500"/>
</visual>


  <asset>
        <texture builtin="gradient" height="100" rgb1="1 1 1" rgb2="0 0 0" type="skybox" width="100"/>
        <texture builtin="flat" height="1278" mark="cross" markrgb="1 1 1" name="texgeom" random="0.01"
                 rgb1="0.8 0.6 0.4" rgb2="0.8 0.6 0.4" type="cube" width="127"/>
        <texture builtin="checker" height="100" name="texplane" rgb1="0 0 0" rgb2="0.8 0.8 0.8" type="2d" width="100"/>
        <material name="MatPlane" reflectance="0.5" shininess="1" specular="1" texrepeat="80 80" texture="texplane"/>
        <!-- 80 80 is one le -->
        <material name="geom" texture="texgeom" texuniform="true"/>

        <!-- My Textures -->
        <!--
        <texture name="TexGrass" file="grass3.png" type="2d" />
        <material name="MatGrass" reflectance="0.05" shininess="0.1" specular="0.1" texrepeat="25 25" texture="TexGrass"/>
        -->
        <material name="MatTarget" rgba="1 0 0 1" reflectance="0.05" shininess="0.1" specular="0.1"/>
    </asset>
  
  <worldbody>
    <light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3"
               specular=".1 .1 .1"/>
        <!-- <geom conaffinity="1" condim="3" material="MatPlane" name="floor" pos="0 0 -0.1" rgba="0.8 0.9 0.8 1" size="40 40 40" type="plane"/>-->
    <geom name="floor" size="80 80 10" material="geom" conaffinity="1" condim="3" pos="0 0 -0.1" rgba="0.8 0.9 0.8 1" type="plane"/>

	
    <camera name="main_cam" fovy="10" pos="0.5 2.8794 -0.6840" xyaxes="0.9397 0 0  0 0.3420 0.9397"/>

    <!-- <body name="obstacle" pos="0.1 -1.0 0.0">          
       <joint axis="0 0 1" name="slider_z_obs" type="slide"/> 
      <geom name="box" type="box"
            size="0.12 0.12 0.12"                     
            rgba="0.9 0.1 0.1 1"
            contype="1" conaffinity="1" condim="3"
            friction="1 0.1 0.1"/>
    </body> -->

    <geom name="box"
          type="box"
          pos="-0.5 -0.8 0.0"   
          size="0.5 0.5 0.5"      
          density="1000"       
          rgba="0.9 0.2 0.2 1"
          contype="1" conaffinity="1" condim="3"/>

    <geom name="box2"
          type="box"
          pos="-1 0.5 0.0"   
          size="0.5 0.5 0.5"      
          density="1000"       
          rgba="0.9 0.2 0.2 1"
          contype="1" conaffinity="1" condim="3"/>

    
    <body name="snake" pos="1.2 -1.0 0.5">

      <joint axis="1 0 0" name="slider_x" type="slide"/>
      <joint axis="0 1 0" name="slider_y" type="slide"/>
      <joint axis="0 0 1" name="slider_z" type="slide"/>
      <joint name="hinge_z" type="hinge" axis="0 0 1" pos="0 0 0" range="-2 2"/>

      <!-- Segment 1 -->
      <body name="segment1" pos="0 0 0">
        <site name="head_site"
                pos="-0.0125 0.0 0.0125"     
                size="0.025"
                rgba="1 1 0 1"
                type="sphere"/>
        <inertial mass="1" pos="0.1 0 0" diaginertia="0.02 0.02 0.02"/>
        <geom name="seg1" type="capsule" fromto="0 0 0 0.2 0 0" 
              size="0.02" rgba="0.1 0.1 0.8 1" mass="1"/>
        <geom name="belly1" type="box" pos="0.1 0 -0.01" size="0.05 0.02 0.005" 
              friction="10 0.1 0.1" rgba="0.5 0.5 0.5 1"/>
        

        
        <!-- Segment 2 -->
        <body name="segment2" pos="0.2 0 0">
          <inertial mass="1" pos="0.1 0 0" diaginertia="0.02 0.02 0.02"/>
          <geom name="seg2" type="capsule" fromto="0 0 0 0.2 0 0" 
                size="0.02" rgba="0.6 0.1 0.8 1" mass="1"/>
          <geom name="belly2" type="box" pos="0.1 0 -0.01" size="0.05 0.02 0.005" 
              friction="10 0.1 0.1" rgba="0.5 0.5 0.5 1"/>
          <joint name="joint2" type="hinge" axis="0 0 1" pos="0 0 0" range="-2 2"/>
          
          <!-- Segment 3 -->
          <body name="segment3" pos="0.2 0 0">
            <inertial mass="1" pos="0.1 0 0" diaginertia="0.02 0.02 0.02"/>
            <geom name="seg3" type="capsule" fromto="0 0 0 0.2 0 0" 
                  size="0.02" rgba="0.1 0.1 0.8 1" mass="1"/>
            <geom name="belly3" type="box" pos="0.1 0 -0.01" size="0.05 0.02 0.005" 
              friction="10 0.1 0.1" rgba="0.5 0.5 0.5 1"/>
            <joint name="joint3" type="hinge" axis="0 0 1" pos="0 0 0" range="-2 2"/>
            
            <!-- Segment 4 -->
            <body name="segment4" pos="0.2 0 0">
              <inertial mass="1" pos="0.1 0 0" diaginertia="0.02 0.02 0.02"/>
              <geom name="seg4" type="capsule" fromto="0 0 0 0.2 0 0" 
                    size="0.02" rgba="0.6 0.1 0.8 1" mass="1"/>
              <geom name="belly4" type="box" pos="0.1 0 -0.01" size="0.05 0.02 0.005" 
              friction="10 0.1 0.1" rgba="0.5 0.5 0.5 1"/>
              <joint name="joint4" type="hinge" axis="0 0 1" pos="0 0 0" range="-2 2"/>
              
              <!-- Segment 5 -->
              <body name="segment5" pos="0.2 0 0">
                <inertial mass="1" pos="0.1 0 0" diaginertia="0.02 0.02 0.02"/>
                <geom name="seg5" type="capsule" fromto="0 0 0 0.2 0 0" 
                      size="0.02" rgba="0.1 0.1 0.8 1" mass="1"/>
                <geom name="belly5" type="box" pos="0.1 0 -0.01" size="0.05 0.02 0.005" 
              friction="10 0.1 0.1" rgba="0.5 0.5 0.5 1"/>
        
                <joint name="joint5" type="hinge" axis="0 0 1" pos="0 0 0" range="-2 2"/>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>
  
  <actuator>
    <!-- Increased gear values to help the motors hold the segments together -->
    <motor joint="joint2" ctrlrange="-10 10" gear="50"/>
    <motor joint="joint3" ctrlrange="-10 10" gear="50"/>
    <motor joint="joint4" ctrlrange="-10 10" gear="50"/>
    <motor joint="joint5" ctrlrange="-10 10" gear="50"/>
  </actuator>

   <sensor>
    <jointpos name="j2_sensor" joint="joint2"/>
    <jointpos name="j3_sensor" joint="joint3"/>
    <jointpos name="j4_sensor" joint="joint4"/>
    <jointpos name="j5_sensor" joint="joint5"/>
    <touch name="head_contact" site="head_site"/>
    <framepos name="head_xyz" objtype="site" objname="head_site"/>
  </sensor>
</mujoco>
